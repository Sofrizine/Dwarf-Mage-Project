[gd_scene load_steps=21 format=4 uid="uid://cn65xjw52x43n"]

[ext_resource type="AudioStream" uid="uid://baouev5hngdhp" path="res://audio/death.wav" id="2_hf64v"]
[ext_resource type="Texture2D" uid="uid://dyxawkwkifk65" path="res://assets/paralax_template_0.png" id="2_r2ivy"]
[ext_resource type="Texture2D" uid="uid://bcb862pg2rggv" path="res://assets/paralax_template_1.png" id="3_0ol5y"]
[ext_resource type="Texture2D" uid="uid://cqqxoqrwfyxkh" path="res://assets/paralax_template_2.png" id="4_vjsgp"]
[ext_resource type="Texture2D" uid="uid://cf04hcnks383x" path="res://assets/paralax_template_3.png" id="5_47yqk"]
[ext_resource type="Texture2D" uid="uid://b8oov1xesnfyo" path="res://assets/dwarf_mage_consistency.png" id="6_ckvpo"]
[ext_resource type="PackedScene" uid="uid://cv11ockj2nqlf" path="res://scenes/prop1.tscn" id="7_mogk0"]
[ext_resource type="PackedScene" uid="uid://oprstp65ne86" path="res://scenes/propC.tscn" id="8_q41nd"]
[ext_resource type="PackedScene" uid="uid://cgn01gyl4t6at" path="res://scenes/player.tscn" id="8_ylu6n"]
[ext_resource type="PackedScene" uid="uid://spoff36t0a3l" path="res://scenes/damageprop.tscn" id="9_dc3so"]
[ext_resource type="PackedScene" uid="uid://dmghrclfg4351" path="res://scenes/enemy.tscn" id="10_2maj4"]
[ext_resource type="PackedScene" uid="uid://cdf74v0wbsngm" path="res://scenes/deathzone.tscn" id="10_107o1"]
[ext_resource type="Script" path="res://scripts/pause.gd" id="11_ssf01"]
[ext_resource type="Script" path="res://scripts/GameManager.gd" id="12_3obnr"]
[ext_resource type="Texture2D" uid="uid://cfkquhfmrxxx7" path="res://assets/heart.png" id="13_4cqa5"]
[ext_resource type="FontFile" uid="uid://cc804r8x3lixb" path="res://assets/fonts/Almendra-Regular.otf" id="14_0ssem"]
[ext_resource type="Theme" uid="uid://7oane116l5kd" path="res://themes/pausemenu.tres" id="15_5fuck"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_45sbk"]
texture = ExtResource("6_ckvpo")
texture_region_size = Vector2i(48, 48)
0:3/0 = 0
0:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-4.5962, -24, 24, -24, 24, 24, -4.5962, 24)
1:3/0 = 0
1:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-24, -24, 24, -24, 24, 24, -24, 24)
2:3/0 = 0
2:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(-24, -24, 4.5962, -24, 4.5962, 24, -24, 24)
0:2/0 = 0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-4.41942, -2.56326, 24, -9.36917, 24, 24, -4.5962, 24)
1:2/0 = 0
1:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-24, -9.36916, 24, -9.36917, 24, 24, -24, 24)
0:0/0 = 0
1:0/0 = 0
2:0/0 = 0
2:1/0 = 0
1:1/0 = 0
0:1/0 = 0
2:2/0 = 0
2:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-24, -9.35812, 1.41421, -4.33103, 4.41942, -1.67938, 4.24264, 24, -24, 24)

[sub_resource type="TileSet" id="TileSet_rusxi"]
tile_size = Vector2i(48, 48)
physics_layer_0/collision_layer = 2
sources/1 = SubResource("TileSetAtlasSource_45sbk")

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_6xkir"]
normal = Vector2(1, 0)

[node name="Level 1" type="Node"]

[node name="GameManager" type="Node" parent="." node_paths=PackedStringArray("lifebar")]
unique_name_in_owner = true
script = ExtResource("12_3obnr")
lifebar = [NodePath("../UI/lifebar/HBoxContainer/heart"), NodePath("../UI/lifebar/HBoxContainer/heart2"), NodePath("../UI/lifebar/HBoxContainer/heart3")]

[node name="Timer" type="Timer" parent="GameManager"]
one_shot = true

[node name="death" type="AudioStreamPlayer2D" parent="GameManager"]
stream = ExtResource("2_hf64v")

[node name="Parallax" type="ParallaxBackground" parent="."]
scroll_base_scale = Vector2(2, 2)

[node name="Parallax_0" type="ParallaxLayer" parent="Parallax"]
position = Vector2(0, -100)
motion_mirroring = Vector2(683, 1)

[node name="Sprite2D" type="Sprite2D" parent="Parallax/Parallax_0"]
texture = ExtResource("2_r2ivy")
centered = false

[node name="Parallax_1" type="ParallaxLayer" parent="Parallax"]
position = Vector2(0, -60)
motion_scale = Vector2(0.1, 0)
motion_mirroring = Vector2(683, 0)

[node name="Sprite2D" type="Sprite2D" parent="Parallax/Parallax_1"]
texture = ExtResource("3_0ol5y")
centered = false

[node name="Parallax_2" type="ParallaxLayer" parent="Parallax"]
position = Vector2(0, -60)
motion_scale = Vector2(0.13, 0)
motion_mirroring = Vector2(683, 0)

[node name="Sprite2D" type="Sprite2D" parent="Parallax/Parallax_2"]
texture = ExtResource("4_vjsgp")
centered = false

[node name="Parallax_3" type="ParallaxLayer" parent="Parallax"]
position = Vector2(0, -60)
motion_scale = Vector2(0.2, 0)
motion_mirroring = Vector2(683, 0)

[node name="Sprite2D" type="Sprite2D" parent="Parallax/Parallax_3"]
texture = ExtResource("5_47yqk")
centered = false

[node name="TileMap" type="Node2D" parent="."]

[node name="base" type="TileMapLayer" parent="TileMap"]
use_parent_material = true
tile_map_data = PackedByteArray("AAAAAAQAAQABAAAAAAABAAQAAQABAAAAAAACAAQAAQABAAAAAAADAAQAAQABAAAAAAAEAAQAAQABAAAAAAAFAAQAAQABAAAAAAAGAAQAAQABAAAAAAAHAAQAAQABAAAAAAAIAAQAAQABAAAAAAAJAAQAAQABAAAAAAAKAAQAAQABAAAAAAALAAQAAQABAAAAAAAMAAQAAQABAAAAAAANAAQAAQABAAAAAAAOAAQAAQABAAAAAAAPAAQAAQABAAAAAAAQAAQAAQABAAAAAAARAAQAAQABAAAAAAASAAQAAQABAAAAAAAUAAQAAQABAAAAAAAVAAQAAQABAAAAAAAWAAQAAQABAAAAAAAXAAQAAQABAAAAAAATAAQAAQABAAAAAAAAAAUAAQABAAMAAAABAAUAAQABAAMAAAACAAUAAQABAAMAAAADAAUAAQABAAMAAAAEAAUAAQABAAMAAAAFAAUAAQABAAMAAAAGAAUAAQABAAMAAAAHAAUAAQABAAMAAAAIAAUAAQABAAMAAAAJAAUAAQABAAMAAAAKAAUAAQABAAMAAAALAAUAAQABAAMAAAAMAAUAAQABAAMAAAANAAUAAQABAAMAAAAOAAUAAQABAAMAAAAPAAUAAQABAAMAAAAQAAUAAQABAAMAAAARAAUAAQABAAMAAAASAAUAAQABAAMAAAATAAUAAQABAAMAAAAUAAUAAQABAAMAAAAVAAUAAQABAAMAAAAWAAUAAQABAAMAAAAXAAUAAQABAAMAAAAYAAUAAQACAAMAAAAYAAQAAQACAAAAAAAaAAQAAQAAAAAAAAAbAAQAAQABAAAAAAAcAAQAAQACAAAAAAAaAAUAAQAAAAMAAAAbAAUAAQABAAMAAAAcAAUAAQACAAMAAAD//wUAAQABAAMAAAD//wQAAQABAAAAAAAfAAQAAQABAAAAAAAgAAQAAQABAAAAAAAhAAQAAQABAAAAAAAiAAQAAQABAAAAAAAjAAMAAQAAAAAAAAAeAAQAAQAAAAAAAAAkAAMAAQABAAAAAAAlAAMAAQABAAAAAAAmAAMAAQACAAAAAAAfAAUAAQABAAMAAAAgAAUAAQABAAMAAAAhAAUAAQABAAMAAAAiAAUAAQABAAMAAAAkAAQAAQABAAMAAAAlAAQAAQABAAMAAAAmAAQAAQACAAMAAAAeAAUAAQAAAAMAAAAjAAQAAQACAAAAAAAoAAQAAQAAAAMAAAApAAMAAQABAAAAAAAqAAMAAQABAAAAAAArAAMAAQABAAAAAAAsAAMAAQABAAAAAAAtAAMAAQACAAAAAAAoAAMAAQAAAAAAAAApAAQAAQABAAMAAAAqAAQAAQABAAMAAAArAAQAAQABAAMAAAAsAAQAAQABAAMAAAAtAAQAAQAAAAAAAAAuAAQAAQABAAAAAAAvAAQAAQABAAAAAAAwAAQAAQABAAAAAAAxAAQAAQABAAAAAAAyAAQAAQABAAAAAAAzAAQAAQABAAAAAAA0AAQAAQACAAAAAAAuAAUAAQABAAMAAAAvAAUAAQABAAMAAAAwAAUAAQABAAMAAAAxAAUAAQABAAMAAAAyAAUAAQABAAMAAAAzAAUAAQABAAMAAAA=")
tile_set = SubResource("TileSet_rusxi")
rendering_quadrant_size = 48

[node name="front" type="TileMapLayer" parent="TileMap"]
z_index = 1
use_parent_material = true
tile_map_data = PackedByteArray("AAAAAAQAAQABAAIAAAABAAQAAQABAAIAAAACAAQAAQABAAIAAAADAAQAAQABAAIAAAAEAAQAAQABAAIAAAAFAAQAAQABAAIAAAAGAAQAAQABAAIAAAAHAAQAAQABAAIAAAAIAAQAAQABAAIAAAAJAAQAAQABAAIAAAAKAAQAAQABAAIAAAALAAQAAQABAAIAAAAMAAQAAQABAAIAAAANAAQAAQABAAIAAAAOAAQAAQABAAIAAAAPAAQAAQABAAIAAAAQAAQAAQABAAIAAAARAAQAAQABAAIAAAASAAQAAQABAAIAAAATAAQAAQABAAIAAAAUAAQAAQABAAIAAAAVAAQAAQABAAIAAAAWAAQAAQABAAIAAAAXAAQAAQABAAIAAAAYAAQAAQACAAIAAAAaAAQAAQAAAAIAAAAbAAQAAQABAAIAAAAcAAQAAQACAAIAAAD//wQAAQABAAIAAAAfAAQAAQABAAIAAAAgAAQAAQABAAIAAAAhAAQAAQABAAIAAAAiAAQAAQABAAIAAAAjAAQAAQACAAIAAAAkAAMAAQABAAIAAAAlAAMAAQABAAIAAAAeAAQAAQAAAAIAAAAjAAMAAQAAAAIAAAAmAAMAAQACAAIAAAAjAAUAAQACAAMAAAAoAAMAAQAAAAIAAAApAAMAAQABAAIAAAAqAAMAAQABAAIAAAArAAMAAQABAAIAAAAsAAMAAQABAAIAAAAtAAMAAQACAAIAAAAtAAUAAQAAAAMAAAAtAAQAAQAAAAIAAAAuAAQAAQABAAIAAAAvAAQAAQABAAIAAAAwAAQAAQABAAIAAAAxAAQAAQABAAIAAAAyAAQAAQABAAIAAAAzAAQAAQABAAIAAAA0AAQAAQACAAIAAAA0AAUAAQACAAMAAAA=")
tile_set = SubResource("TileSet_rusxi")

[node name="front2" type="TileMapLayer" parent="TileMap"]
z_index = 2
use_parent_material = true
tile_map_data = PackedByteArray("AAAAAAQAAQABAAIAAAABAAQAAQABAAIAAAACAAQAAQABAAIAAAADAAQAAQABAAIAAAAEAAQAAQABAAIAAAAFAAQAAQABAAIAAAAGAAQAAQABAAIAAAAHAAQAAQABAAIAAAAIAAQAAQABAAIAAAAJAAQAAQABAAIAAAAKAAQAAQABAAIAAAALAAQAAQABAAIAAAAMAAQAAQABAAIAAAANAAQAAQABAAIAAAAOAAQAAQABAAIAAAAPAAQAAQABAAIAAAAQAAQAAQABAAIAAAARAAQAAQABAAIAAAASAAQAAQABAAIAAAATAAQAAQABAAIAAAAUAAQAAQABAAIAAAAVAAQAAQABAAIAAAAWAAQAAQABAAIAAAAXAAQAAQABAAIAAAAYAAQAAQACAAIAAAAaAAQAAQAAAAIAAAAbAAQAAQABAAIAAAAcAAQAAQACAAIAAAD//wQAAQABAAIAAAAfAAQAAQABAAIAAAAgAAQAAQABAAIAAAAhAAQAAQABAAIAAAAiAAQAAQABAAIAAAAkAAMAAQABAAIAAAAlAAMAAQABAAIAAAAeAAQAAQAAAAIAAAAjAAMAAQAAAAIAAAAmAAMAAQACAAIAAAAjAAQAAQAAAAMAAAAtAAQAAQACAAMAAAA=")
tile_set = SubResource("TileSet_rusxi")

[node name="props" type="Node" parent="."]

[node name="prop" parent="props" instance=ExtResource("7_mogk0")]
position = Vector2(411, 189)

[node name="prop1" parent="props" instance=ExtResource("7_mogk0")]
position = Vector2(505, 191)

[node name="propC" parent="props" instance=ExtResource("8_q41nd")]
position = Vector2(582, 191)

[node name="player" parent="." instance=ExtResource("8_ylu6n")]
position = Vector2(292, 169)
collision_mask = 6

[node name="Enemy" parent="." instance=ExtResource("10_2maj4")]
position = Vector2(66, 116)

[node name="damageprop" parent="." instance=ExtResource("9_dc3so")]
position = Vector2(692, 192)

[node name="damageprop2" parent="." instance=ExtResource("9_dc3so")]
position = Vector2(817, 192)

[node name="damageprop3" parent="." instance=ExtResource("9_dc3so")]
position = Vector2(959, 191)

[node name="deathzone" parent="." instance=ExtResource("10_107o1")]
position = Vector2(671, 351)

[node name="border" type="StaticBody2D" parent="."]
collision_layer = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="border"]
shape = SubResource("WorldBoundaryShape2D_6xkir")

[node name="UI" type="CanvasLayer" parent="."]

[node name="pause" type="Node" parent="UI"]
script = ExtResource("11_ssf01")

[node name="pausepanel" type="Panel" parent="UI/pause"]
unique_name_in_owner = true
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Label" type="Label" parent="UI/pause/pausepanel"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -89.0
offset_top = -141.0
offset_right = 89.0
offset_bottom = -82.0
grow_horizontal = 2
grow_vertical = 2
theme_override_fonts/font = ExtResource("14_0ssem")
theme_override_font_sizes/font_size = 36
text = "Pause Menu"
horizontal_alignment = 1

[node name="VBoxContainer" type="VBoxContainer" parent="UI/pause/pausepanel"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -77.0
offset_top = -77.0
offset_right = 77.0
offset_bottom = 77.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 11

[node name="resume" type="Button" parent="UI/pause/pausepanel/VBoxContainer"]
process_mode = 3
layout_mode = 2
theme = ExtResource("15_5fuck")
text = "Resume"

[node name="options" type="Button" parent="UI/pause/pausepanel/VBoxContainer"]
process_mode = 3
layout_mode = 2
theme = ExtResource("15_5fuck")
text = "Options
"

[node name="exit" type="Button" parent="UI/pause/pausepanel/VBoxContainer"]
process_mode = 3
layout_mode = 2
theme = ExtResource("15_5fuck")
text = "Exit"

[node name="lifebar" type="Panel" parent="UI"]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -1146.0
offset_top = 6.0
offset_right = -938.0
offset_bottom = 66.0
grow_horizontal = 0

[node name="HBoxContainer" type="HBoxContainer" parent="UI/lifebar"]
layout_mode = 0
offset_left = 8.0
offset_right = 208.0
offset_bottom = 60.0

[node name="heart" type="TextureRect" parent="UI/lifebar/HBoxContainer"]
layout_mode = 2
texture = ExtResource("13_4cqa5")
expand_mode = 2

[node name="heart2" type="TextureRect" parent="UI/lifebar/HBoxContainer"]
texture_filter = 1
layout_mode = 2
texture = ExtResource("13_4cqa5")
expand_mode = 2

[node name="heart3" type="TextureRect" parent="UI/lifebar/HBoxContainer"]
texture_filter = 1
layout_mode = 2
texture = ExtResource("13_4cqa5")
expand_mode = 2

[connection signal="timeout" from="GameManager/Timer" to="GameManager" method="_on_timer_timeout"]
[connection signal="finished" from="GameManager/death" to="GameManager" method="_on_death_finished"]
[connection signal="pressed" from="UI/pause/pausepanel/VBoxContainer/resume" to="UI/pause" method="_on_resume_pressed"]
[connection signal="pressed" from="UI/pause/pausepanel/VBoxContainer/exit" to="UI/pause" method="_on_exit_pressed"]
